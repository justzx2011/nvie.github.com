
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en">
	<head>
		<meta charset="utf-8"/>
		<title>A whole new blog &raquo; nvie.com</title>
		<link href='http://fonts.googleapis.com/css?family=Droid+Sans+Mono' rel='stylesheet' type='text/css'/>
		<link rel="stylesheet" type="text/css" href="/css/style.css" />
		<link rel="stylesheet" type="text/css" href="/css/syntax.css" />
		<link rel="stylesheet" type="text/css" href="/css/fontface.css" />
		<meta name="viewport" content="width=700, user-scalable=yes, maximum-scale=1.5" />
		<link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="/css/mobile.css" type="text/css" /> 
		<link rel="stylesheet" media="only screen and (max-device-width: 1024px)" href="/css/mobile.css" type="text/css" /> 
		<link rel="stylesheet" media="print" type="text/css" href="/css/print.css" />
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js"></script>
		<script type="text/javascript" src="/js/relatize_date.js"></script>
		
		<script type="text/javascript" src="/js/site.js"></script>
		<script type="text/javascript" src="/js/defeatthefout.js"></script>
		<meta name="generator" content="nanoc"/>
		<meta http-equiv="X-UA-Compatible" content="ie=edge,chrome=1"/>
		<link href="/img/favicon.ico" rel="shortcut icon" type="image/x-icon" /> 
		<link href="/img/icon.png" rel="apple-touch-icon" /> 
		<link rel="alternate" type="application/atom+xml" href="http://feeds.feedburner.com/nvie" />

        <script type="text/javascript" src="//use.typekit.net/nge1fhs.js"></script>
        <script type="text/javascript">try{Typekit.load();}catch(e){}</script></script></script>

		
		
		<script type="text/javascript"> 
		var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
		document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
		</script> 
		<script type="text/javascript"> 
		var pageTracker = _gat._getTracker("UA-7780973-1");
		pageTracker._initData();
		pageTracker._trackPageview();
		</script>
		

        <script type="text/javascript">
        /* <![CDATA[ */
            (function() {
                var s = document.createElement('script'), t = document.getElementsByTagName('script')[0];
                s.type = 'text/javascript';
                s.async = true;
                s.src = 'http://api.flattr.com/js/0.6/load.js?mode=auto';
                t.parentNode.insertBefore(s, t);
            })();
        /* ]]> */</script>
	</head>
	<body>
		<div id="header">
			<h1><a href="/"><span id="nvie">nvie</span><span id="dot">.</span><span id="ext">com</span></a></h1>
			<ul>
                <li id="home" ><a href="/">Home</a></li>
                <li id="posts"  class='current'><a href="/posts/">Posts</a></li>
                
                <li id="about" ><a href="/about/">About me</a></li>
			</ul>
        </div>
		<div id="actionbox" style="display: none">
            <div id="rss"><a href="http://feeds.feedburner.com/nvie"><img src="/img/rss.png" alt="Subscribe" title="Subscribe" width="16" height="16" /></a></div>
            <div id="tweet"><a href="http://twitter.com/share?url=http://nvie.com/posts/a-whole-new-blog/&via=nvie&text=A%20whole%20new%20blog"><img src='/img/twitter.png' width="16" height="16" alt="Tweet this!" title="Tweet this!" /></a></div>

            <!-- Ad -->
            <div id="influads_block" class="influads_block"> </div>
            <script type="text/javascript">(function(){ var acc =   "acc_535d576_pub";var st ="css";var or= "130";var e=document.getElementsByTagName("script")[0];var d=document.createElement("script");d.src=('https:' == document.location.protocol ?'https://' : 'http://') +"engine.influads.com/show/"+or+"/"+st+"/"+acc;d.type="text/javascript"; d.async=true; d.defer=true; e.parentNode.insertBefore(d,e);})();</script>
		</div>
		<div id="main">
			<div id="post">
    
<div class="flattr-quick no-print"><a class="FlattrButton" style="display:none;" href="http://nvie.com/posts/a-whole-new-blog/"></a></div>
<h1 style="clear: left">A whole new blog</h1>

<p id="permalink" class="print-only">http://nvie.com/posts/a-whole-new-blog/</p>
<p class="no-print created_at dateline">Published: <span class="reldate">September 13, 2010</span></p><p class="print-only created_at dateline">Published: <span>September 13, 2010</span></p>
<p>Finally, I’ve made the move to a static blog engine!  I’m using
<a href="http://nanoc.stoneship.org/">nanoc</a> now (bye bye WordPress). nanoc is a very
flexible and customizable static site generator, written by <a href="http://twitter.com/ddfreyne">Denis
Defreyne</a>.</p>
<p>As with all static site generators, nanoc lets you write your source files in a
simple markup language.  Out of the box, nanoc offers you the choice of using
Markdown, Textile, reStructuredText or plain <span class="caps">HTML</span> (with or without embedded
Ruby).  In fact, nanoc is nothing more than a generator honoring a <code>Rules</code>-file
that tells it how to compile, layout and route the site’s items.</p>
<h2>Compiling items</h2>
<p>An “item” is a file on your website.  It can be any kind of file, like a web
site page (<span class="caps">HTML</span>), an image, a JavaScript or <span class="caps">CSS</span> file or an <span class="caps">RSS</span> feed.  During
the compile phase, you specify which sequential actions should be performed on
the <em>content</em> of that item.  These actions are called <strong>filters</strong>.  Some examples
of filters are an embedded ruby filter, a
<a href="http://redcloth.org/">Textile-to-<span class="caps">HTML</span></a> converter, a <a href="http://lesscss.org/">less</a>
compiler, or minify <a href="http://code.google.com/p/rainpress/"><span class="caps">CSS</span></a>.  Filters can be
chained, for example:</p>
<pre><code class="language-ruby"><span class="n">compile</span> <span class="s1">'/static/css/*/'</span> <span class="k">do</span>
    <span class="c1"># compress CSS :)</span>
    <span class="n">filter</span> <span class="ss">:less</span>
    <span class="n">filter</span> <span class="ss">:rainpress</span>
<span class="k">end</span></code></pre>
<p>Which turns <code>.less</code>-files into compressed <span class="caps">CSS</span>:</p>
<p><img src="/img/2010/09/less2css.png" alt=""></p>
<p>Any filter you can imagine, nanoc can handle. nanoc comes with a lot of filters
<a href="http://nanoc.stoneship.org/docs/4-basic-concepts/#filters">out of the box</a>, but
even <a href="http://nanoc.stoneship.org/docs/5-advanced-concepts/#writing-filters">writing your own</a>
filters really is a piece of cake.</p>
<h2>Routing items</h2>
<p>After compiling (i.e. transforming content through filters) comes the routing
of the items.  This is a means of assigning file names to compiled content.
nanoc calculates default files names from the input, but you can use this to
influence the default naming.  A special case is where you set the route to
<code>Nil</code> which doesn’t write the file at all.  I use this to test draft posts
locally, like this (oh, did I mention the <code>Rules</code> file is 100% Ruby?):</p>
<pre><code class="language-ruby"><span class="n">route</span> <span class="s1">'/posts/*/'</span> <span class="k">do</span>
    <span class="k">if</span> <span class="vg">$include_drafts</span> <span class="ow">or</span> <span class="vi">@item</span><span class="o">[</span><span class="ss">:published</span><span class="o">]</span> <span class="k">then</span>
        <span class="s1">'/posts/'</span> <span class="o">+</span> <span class="vi">@item</span><span class="o">.</span><span class="n">slug</span> <span class="o">+</span> <span class="s1">'/index.html'</span>
    <span class="k">end</span>
<span class="k">end</span></code></pre>
<h2>Laying out items</h2>
<p>Finally, layouts are applied.  Layouts are kind of templates that can be used
to “frame” the item’s contents.  This is typically used for <span class="caps">HTML</span> files only,
but isn’t limited to it.  For example, the blog posts are compiled into
(partial) <span class="caps">HTML</span>, and the layout rules put the site’s container <span class="caps">HTML</span> around it,
adding <span class="caps">CSS</span> styling, jQuery scripts, the header, sidebars and footer and Google
Analytics tracking (these go for each page).  There’s a special extra layout
rule for blog post pages, which additionally adds Disqus comments.</p>
<h2>Summary</h2>
<p>Each build of this blog also automatically:</p>
<ul>
<li>Converts <a href="http://redcloth.org/">Textile</a> content to <span class="caps">HTML</span>
</li>
	<li>Highlights syntax using <a href="http://pygments.org/">pygments</a>
</li>
	<li>Converts <a href="http://lesscss.org/">less</a> to <span class="caps">CSS</span>
</li>
	<li>Minifies <a href="http://code.google.com/p/rainpress/"><span class="caps">CSS</span></a>
</li>
	<li>Minifies <a href="http://code.google.com/closure/compiler/">JavaScript</a>
</li>
	<li>
<a href="http://www.graphicsmagick.org/convert.html">Downsizes</a> source images</li>
	<li>Generates redirect pages for alternative (old-style) URL’s (for user that have
  existing bookmarks to old WordPress URL’s)</li>
	<li>Generates a new blog post
  <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Blogging.html"><span class="caps">RSS</span> feed</a>
</li>
</ul><p>In short, now nanoc is fully configured to my wishes, I can simply focus on
writing <strong>blog content</strong>, without preparing image content (it is done
automatically), and without having to choose between either a “<span class="caps">WYSIWYG</span>” editor
or writing <span class="caps">HTML</span> manually.  And I can do it in an offline fashion, too, which
was one my main complaints about WordPress.</p>
<p>So I’m happy.</p>
<p>Oh, and since I have been converting my blog anyway, I also created a new look
and feel for it.  I hope you like it.  Feel free to comment.</p>
</div>


<div class="flattr-reminder no-print">
If you find this post useful, please <a class="flattr-link" href="https://flattr.com/thing/61440/"><img src="/img/flattrblack.png" width="43" height="10" /></a> it.
</div>


<hr style="margin-top: 16px; margin-bottom: 16px" />
<div id="disqus_thread"></div>
<script type="text/javascript">
  var disqus_identifier = 'a-whole-new-blog';
  var disqus_url = 'http://nvie.com/posts/a-whole-new-blog/';
  var disqus_shortname = 'nvie';
  var disqus_title = "A whole new blog";
  (function() {
   var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
   dsq.src = 'http://nvie.disqus.com/embed.js';
   (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript=nvie">comments powered by Disqus.</a></noscript>

		</div>
		<div id="footer">
            <p>Vincent Driessen is an independent Python and iOS software
            engineer and consultant from the Netherlands. You may
            <a href="http://www.3rdcloud.com">hire him</a>.
			</p>
		</div>

		
		
		<script type="text/javascript">
			(function () {
			var s = document.createElement('script'); s.async = true;
			s.src = 'http://disqus.com/forums/nvie/count.js';
			(document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
			}());
		</script>
		
	</body>
</html>
